<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Forged By Freedom Betting Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
    body {
        margin: 0;
        padding: 0;
        background: #000;
        color: #fff;
        font-family: Arial, sans-serif;
    }

    .header {
        text-align: center;
        padding: 30px 10px 20px 10px;
        border-bottom: 1px solid #222;
    }

    .glow {
        color: #ff8c00;
        text-shadow: 0 0 12px #ff8c00, 0 0 20px #ff6600, 0 0 30px #ff4500;
        animation: pulse 2.5s infinite ease-in-out;
    }

    @keyframes pulse {
        0%   { text-shadow: 0 0 10px #ff8c00; }
        50%  { text-shadow: 0 0 25px #ff4500; }
        100% { text-shadow: 0 0 10px #ff8c00; }
    }

    a { color: #ff8c00; text-decoration: none; }
    a:hover { text-decoration: underline; }

    .sport-title {
        font-size: 26px;
        margin-top: 25px;
        margin-bottom: 10px;
        text-align: center;
        color: #ff8c00;
    }

    .game-card {
        border-bottom: 1px solid #222;
        padding: 15px;
        margin: 0 12px;
    }

    .line-bold {
        font-weight: bold;
        font-size: 17px;
        color: #ff8c00;
    }

    .sub-info {
        color: #bbb;
        font-size: 14px;
        margin-top: 5px;
    }

</style>
</head>

<body>

<div class="header">
    <div class="glow" style="font-size:20px;">
        Provided by <a href="https://forgedbyfreedom.org" target="_blank">ForgedByFreedom.org</a>
    </div>

    <div class="glow" style="font-size:34px; margin-top:8px;">
        FORGED BY FREEDOM STRENGTH AND NUTRITION
    </div>

    <div class="glow" style="font-size:20px; margin-top:5px;">
        STRENGTH – DISCIPLINE – FREEDOM
    </div>
</div>

<div id="sports-container"></div>

<script>
async function loadJson(url) {
    const res = await fetch(url + "?v=" + Date.now()); // bypass CDN caching
    if (!res.ok) return null;
    return await res.json();
}

function bySport(data) {
    const out = {};
    data.forEach(g => {
        const key = g.sport || "other";
        if (!out[key]) out[key] = [];
        out[key].push(g);
    });
    return out;
}

function renderGames(data) {
    const container = document.getElementById("sports-container");
    container.innerHTML = "";

    const grouped = bySport(data);

    for (const sport of Object.keys(grouped)) {
        const title = document.createElement("div");
        title.className = "sport-title";
        title.textContent = sport.toUpperCase();
        container.appendChild(title);

        grouped[sport].forEach(g => {
            const card = document.createElement("div");
            card.className = "game-card";

            const home = g.home_team?.name || "Home";
            const away = g.away_team?.name || "Away";

            const spread = g.odds?.spread ?? "N/A";
            const total = g.odds?.total ?? "N/A";
            const fav = g.odds?.details ?? "";

            const prediction = g.prediction?.pick 
                ? `${g.prediction.pick} (${g.prediction.confidence}%)`
                : "No prediction";

            const weatherRisk = g.weatherRisk?.overallRisk ?? "Indoor / N/A";

            card.innerHTML = `
                <div class="line-bold">${away} @ ${home}</div>
                <div class="sub-info">Odds: ${fav}</div>
                <div class="sub-info">Spread: ${spread} | Total: ${total}</div>
                <div class="sub-info">Prediction: ${prediction}</div>
                <div class="sub-info">Weather Risk: ${weatherRisk}</div>
                <div class="sub-info">Time: ${g.date_local ?? "N/A"}</div>
            `;

            container.appendChild(card);
        });
    }
}

async function boot() {
    const combined = await loadJson("https://data.forgedbyfreedom.org/combined.json");
    if (!combined || !combined.data) {
        document.getElementById("sports-container").innerHTML =
            "<div style='padding:20px; text-align:center;'>No games available.</div>";
        return;
    }

    renderGames(combined.data);
}

boot();
</script>

</body>
</html>
