<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>FBF Predictions</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    body {
        font-family: Arial, sans-serif;
        background: #111;
        color: #eee;
        margin: 0;
        padding: 20px;
    }

    h1 {
        text-align: center;
        margin-bottom: 25px;
        color: #fff;
    }

    /* 3-card layout */
    #games-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 18px;
    }

    .game-card {
        background: #1b1b1b;
        padding: 16px;
        border-radius: 10px;
        border: 1px solid #333;
        box-shadow: 0px 0px 10px #000;
    }

    .game-card h3 {
        margin: 0 0 12px;
        font-size: 20px;
        color: #fff;
    }

    .conf {
        font-weight: bold;
        padding: 2px 6px;
        border-radius: 6px;
        margin-left: 6px;
    }

    /* confidence colors */
    .low { background: #802020; }
    .med { background: #804c20; }
    .high { background: #1f7a29; }

</style>
</head>

<body>

<h1>FBF AI Picks</h1>
<div id="games-container"></div>

<script>
async function loadPicks() {
    try {
        const res = await fetch("predictions.json?_=" + Date.now());
        const data = await res.json();

        const games = data.data || [];
        console.log("Loaded predictions:", games);
        renderGames(games);
    } catch (e) {
        console.error("Error loading predictions:", e);
    }
}

function renderGames(games) {
    const container = document.getElementById("games-container");
    container.innerHTML = "";

    games.forEach(g => {
        const card = document.createElement("div");
        card.className = "game-card";

        card.innerHTML = `
            <h3>${g.matchup}</h3>
            <p><b>Start:</b> ${g.commence_time}</p>

            <p><b>ML:</b> ${g.SU_pick}
                <span class="conf ${g.SU_grade}">
                    ${g.SU_conf}%
                </span>
            </p>

            <p><b>ATS:</b> ${g.ATS_pick}
                <span class="conf ${g.ATS_grade}">
                    ${g.ATS_conf}%
                </span>
            </p>

            <p><b>OU:</b> ${g.OU_pick || "â€”"}
                ${g.OU_conf ? `<span class="conf ${g.OU_grade}">
                    ${g.OU_conf}%
                </span>` : ""}
            </p>
        `;

        container.appendChild(card);
    });
}

// Load immediately
loadPicks();
// Refresh every 60s
setInterval(loadPicks, 60000);
</script>

</body>
</html>
