<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Forged By Freedom ‚Ä¢ Live Odds & Picks</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content="Forged By Freedom Strength and Nutrition ‚Ä¢ Live odds and model picks, updated every 15 minutes. For entertainment purposes only."
  />
  <style>
    :root {
      --bg: #050814;
      --panel: #0b1021;
      --panel-soft: #12172b;
      --accent: #ff6b00;
      --accent-soft: rgba(255, 107, 0, 0.3);
      --accent-glow: 0 0 18px rgba(255, 107, 0, 0.7);
      --text-main: #f5f5f7;
      --text-muted: #a5adc4;
      --border-muted: #262b43;
      --sport-pill-bg: #161a2d;
      --sport-pill-active: #ff6b00;
      --danger: #ff3b3b;
      --success: #00d27a;
      --shadow-soft: 0 18px 40px rgba(0, 0, 0, 0.75);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: radial-gradient(circle at top, #131735 0, #040612 55%, #000 100%);
      color: var(--text-main);
      min-height: 100vh;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    .page {
      max-width: 1280px;
      margin: 0 auto;
      padding: 16px 16px 48px;
    }

    /* HEADER / HERO -------------------------------------------------- */

    .hero {
      background: radial-gradient(circle at top, #1c223f 0, #070814 60%);
      border-radius: 18px;
      padding: 16px 18px;
      margin-bottom: 18px;
      border: 1px solid rgba(255, 255, 255, 0.03);
      box-shadow: var(--shadow-soft);
      position: relative;
      overflow: hidden;
    }

    .hero::before {
      content: "";
      position: absolute;
      inset: -40%;
      background: conic-gradient(
        from 220deg,
        transparent 0deg,
        rgba(255, 107, 0, 0.4) 110deg,
        rgba(255, 107, 0, 0.1) 160deg,
        transparent 360deg
      );
      opacity: 0.55;
      mix-blend-mode: screen;
      filter: blur(36px);
      pointer-events: none;
    }

    .hero-inner {
      position: relative;
      z-index: 1;
      display: grid;
      grid-template-columns: minmax(0, 2.3fr) minmax(0, 1.7fr);
      gap: 18px;
      align-items: center;
    }

    @media (max-width: 800px) {
      .hero-inner {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .hero-mainline {
      font-size: 1.1rem;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--accent);
      text-shadow: 0 0 10px rgba(255, 107, 0, 0.8);
      margin-bottom: 6px;
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .hero-mainline span.emoji {
      font-size: 1.4rem;
      filter: drop-shadow(0 0 6px rgba(255, 255, 255, 0.4));
    }

    .hero-subline {
      font-size: 0.88rem;
      color: var(--text-muted);
      margin-bottom: 10px;
    }

    .hero-brand {
      font-size: 1.05rem;
      font-weight: 800;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      margin-top: 4px;
      margin-bottom: 4px;
    }

    .hero-pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      background: radial-gradient(circle at top left, #262b4f 0, #0b0f20 50%);
      color: var(--text-muted);
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      margin-top: 4px;
    }

    .hero-pill-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--accent);
      box-shadow: var(--accent-glow);
    }

    .hero-footer {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-top: 6px;
    }

    .hero-footer strong {
      color: var(--accent);
      font-weight: 700;
      text-shadow: 0 0 8px rgba(255, 107, 0, 0.9);
    }

    .hero-right {
      border-radius: 16px;
      padding: 12px 14px;
      background: linear-gradient(135deg, #12172b 0, #070814 70%);
      border: 1px solid rgba(255, 255, 255, 0.04);
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .hero-right-title {
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .hero-right-cta {
      font-size: 0.9rem;
      color: var(--text-main);
    }

    .hero-right-cta strong {
      color: var(--accent);
      font-weight: 700;
    }

    .hero-right-warning {
      font-size: 0.78rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      opacity: 0.9;
    }

    /* STATS + FILTER BAR --------------------------------------------- */

    .top-row {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-bottom: 16px;
      align-items: center;
      justify-content: space-between;
    }

    .stats {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .stat-card {
      min-width: 120px;
      padding: 8px 11px;
      border-radius: 12px;
      background: rgba(9, 11, 26, 0.92);
      border: 1px solid var(--border-muted);
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.6);
    }

    .stat-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--text-muted);
      margin-bottom: 4px;
    }

    .stat-value {
      font-size: 1.1rem;
      font-weight: 700;
    }

    .stat-value.accent {
      color: var(--accent);
      text-shadow: var(--accent-glow);
    }

    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .filter-btn {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid var(--sport-pill-bg);
      background: var(--sport-pill-bg);
      color: var(--text-muted);
      cursor: pointer;
      transition: all 0.15s ease-out;
    }

    .filter-btn span.badge {
      font-size: 0.72rem;
      padding: 1px 6px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.06);
      margin-left: 6px;
    }

    .filter-btn.active {
      background: var(--sport-pill-active);
      border-color: var(--accent);
      color: #050509;
      font-weight: 700;
      box-shadow: var(--accent-glow);
    }

    /* GRID + CARDS ---------------------------------------------------- */

    .section-header {
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--text-muted);
      margin: 8px 0 10px;
    }

    .cards-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 14px;
    }

    @media (max-width: 1100px) {
      .cards-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    @media (max-width: 720px) {
      .cards-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .pick-card {
      border-radius: 16px;
      background: linear-gradient(145deg, #090c1a 0, #050713 45%, #111529 100%);
      border: 1px solid var(--border-muted);
      padding: 11px 12px 11px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.8);
      position: relative;
      overflow: hidden;
    }

    .pick-card--highlight {
      border-color: rgba(255, 107, 0, 0.95);
      box-shadow: 0 0 0 1px rgba(255, 107, 0, 0.8),
        0 0 22px rgba(255, 107, 0, 0.95),
        0 18px 40px rgba(0, 0, 0, 0.9);
    }

    .pick-card--highlight::before {
      content: "HIGH CONFIDENCE";
      position: absolute;
      top: 10px;
      right: -46px;
      transform: rotate(34deg);
      font-size: 0.65rem;
      font-weight: 700;
      text-transform: uppercase;
      padding: 2px 56px;
      background: linear-gradient(120deg, #ffb347, #ff6b00);
      color: #1a0800;
      box-shadow: var(--accent-glow);
      letter-spacing: 0.15em;
      pointer-events: none;
    }

    .pick-header-row {
      display: flex;
      justify-content: space-between;
      gap: 10px;
    }

    .sport-pill {
      font-size: 0.72rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.04);
      color: var(--text-muted);
    }

    .date-line {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .matchup-main {
      font-size: 0.95rem;
      font-weight: 600;
      margin-top: 4px;
      margin-bottom: 4px;
    }

    .matchup-teams {
      font-size: 0.82rem;
      color: var(--text-muted);
    }

    .odds-row,
    .model-row,
    .weather-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      font-size: 0.8rem;
    }

    .pill {
      padding: 4px 7px;
      border-radius: 8px;
      background: #14172a;
      border: 1px solid rgba(255, 255, 255, 0.04);
      color: var(--text-muted);
    }

    .pill strong {
      color: var(--text-main);
      font-weight: 600;
    }

    .pill-edge-positive {
      color: var(--success);
    }

    .pill-edge-negative {
      color: var(--danger);
    }

    .footer-line {
      font-size: 0.7rem;
      color: var(--text-muted);
      margin-top: 4px;
      opacity: 0.8;
    }

    /* STATUS / ERROR -------------------------------------------------- */

    .status-line {
      font-size: 0.85rem;
      color: var(--text-muted);
      margin: 8px 0 16px;
    }

    .status-line span.dot {
      display: inline-block;
      width: 8px;
      height: 8px;
      border-radius: 999px;
      margin-right: 6px;
      background: var(--accent);
      box-shadow: var(--accent-glow);
    }

    .status-line.error span.dot {
      background: var(--danger);
      box-shadow: 0 0 12px rgba(255, 59, 59, 0.9);
    }
  </style>
</head>
<body>
  <div class="page">
    <!-- HERO HEADER WITH YOUR EXACT LANGUAGE -->
    <header class="hero">
      <div class="hero-inner">
        <div>
          <div class="hero-mainline">
            <span class="emoji">üèà</span>
            <span>LIVE ODDS + PICKS UPDATED EVERY 15 MINUTES ‚Ä¢ FOR ENTERTAINMENT ONLY</span>
          </div>
          <div class="hero-subline">
            Provided to you by <strong>ForgedByFreedom.org</strong>
          </div>
          <div class="hero-brand">FORGED BY FREEDOM STRENGTH AND NUTRITION</div>
          <div class="hero-subline">STRENGTH ‚Äì DISCIPLINE ‚Äì FREEDOM</div>
          <div class="hero-subline">
            Visit us for all your fitness, nutrition and supplement program needs
          </div>
          <div class="hero-pill" style="margin-top:8px;">
            <span class="hero-pill-dot"></span>
            <span>For entertainment purposes only</span>
          </div>
          <div class="hero-footer">
            <strong>No gambling advice.</strong> This dashboard is for informational
            and entertainment use only.
          </div>
        </div>

        <div class="hero-right">
          <div class="hero-right-title">Forged By Freedom ‚Ä¢ Strength &amp; Nutrition</div>
          <div class="hero-right-cta">
            Optimizing performance with disciplined training, precise nutrition, and
            evidence-backed supplementation. Built by a veteran-owned, freedom-first brand.
          </div>
          <div class="hero-right-warning">
            Model output only ‚Ä¢ Not a guarantee ‚Ä¢ Always use your own judgment
          </div>
        </div>
      </div>
    </header>

    <!-- STATS + FILTERS -->
    <div class="top-row">
      <div class="stats">
        <div class="stat-card">
          <div class="stat-label">Total Games</div>
          <div class="stat-value" id="stat-total-games">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">High-Confidence Picks</div>
          <div class="stat-value accent" id="stat-high-confidence">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Picks Available</div>
          <div class="stat-value" id="stat-picks">0</div>
        </div>
      </div>

      <div class="filters">
        <button class="filter-btn active" data-sport="all">ALL</button>
        <button class="filter-btn" data-sport="nba">NBA</button>
        <button class="filter-btn" data-sport="ncaab">NCAAB</button>
        <button class="filter-btn" data-sport="ncaaf">NCAAF</button>
        <button class="filter-btn" data-sport="nfl">NFL</button>
        <button class="filter-btn" data-sport="nhl">NHL</button>
      </div>
    </div>

    <div class="status-line" id="status-line">
      <span class="dot"></span>
      Loading latest predictions and odds‚Ä¶
    </div>

    <div class="section-header" id="section-header">ALL SPORTS</div>

    <div class="cards-grid" id="cards-grid"></div>
  </div>

  <script>
    const filters = document.querySelectorAll(".filter-btn");
    const cardsGrid = document.getElementById("cards-grid");
    const statusLine = document.getElementById("status-line");
    const statTotalGames = document.getElementById("stat-total-games");
    const statHighConfidence = document.getElementById("stat-high-confidence");
    const statPicks = document.getElementById("stat-picks");
    const sectionHeader = document.getElementById("section-header");

    let allPredictions = [];
    let bySportCounts = {};
    let combinedById = {};

    const SPORT_LABELS = {
      nba: "NBA",
      ncaab: "NCAAB",
      ncaaf: "NCAAF",
      nfl: "NFL",
      nhl: "NHL",
    };

    async function loadData() {
      try {
        // Bust cache so the GitHub Pages CDN always pulls fresh JSON
        const ts = Date.now();
        const [predRes, combRes] = await Promise.all([
          fetch("predictions.json?_=" + ts),
          fetch("combined.json?_=" + ts),
        ]);

        if (!predRes.ok) {
          throw new Error("Failed to load predictions.json");
        }
        if (!combRes.ok) {
          throw new Error("Failed to load combined.json");
        }

        const predJson = await predRes.json();
        const combJson = await combRes.json();

        const preds = Array.isArray(predJson.predictions)
          ? predJson.predictions
          : [];

        allPredictions = preds;

        // Build ID -> combined game map for time / extra info
        combinedById = {};
        if (Array.isArray(combJson.data)) {
          for (const g of combJson.data) {
            if (g && g.id != null) {
              combinedById[String(g.id)] = g;
            }
          }
        }

        // Count stats
        let highCount = 0;
        bySportCounts = {};

        for (const p of preds) {
          const sport = (p.sport || "other").toLowerCase();
          bySportCounts[sport] = (bySportCounts[sport] || 0) + 1;

          const conf =
            p.prediction && typeof p.prediction.confidence === "number"
              ? p.prediction.confidence
              : 0;

          if (p.highlight || conf >= 70) {
            highCount++;
          }
        }

        statTotalGames.textContent = preds.length;
        statPicks.textContent = preds.length;
        statHighConfidence.textContent = highCount;

        // Fill filter badges
        filters.forEach((btn) => {
          const sp = btn.dataset.sport;
          if (sp === "all") {
            const total =
              bySportCounts["nba"] +
              bySportCounts["ncaab"] +
              bySportCounts["ncaaf"] +
              bySportCounts["nfl"] +
              bySportCounts["nhl"] || preds.length;
            setFilterBadge(btn, total);
          } else {
            setFilterBadge(btn, bySportCounts[sp] || 0);
          }
        });

        statusLine.classList.remove("error");
        statusLine.innerHTML =
          '<span class="dot"></span> Data loaded. Updated every ~15 minutes from the latest JSON.';
        renderCards("all");
      } catch (err) {
        console.error(err);
        statusLine.classList.add("error");
        statusLine.innerHTML =
          '<span class="dot"></span> Error loading predictions. Check that predictions.json and combined.json are present in the repo root after the pipeline runs.';
      }
    }

    function setFilterBadge(btn, count) {
      let badge = btn.querySelector("span.badge");
      if (!badge) {
        badge = document.createElement("span");
        badge.className = "badge";
        btn.appendChild(badge);
      }
      badge.textContent = count;
    }

    function renderCards(sportFilter) {
      cardsGrid.innerHTML = "";

      const filtered =
        sportFilter === "all"
          ? allPredictions
          : allPredictions.filter(
              (p) => (p.sport || "").toLowerCase() === sportFilter
            );

      sectionHeader.textContent =
        sportFilter === "all"
          ? "ALL SPORTS"
          : SPORT_LABELS[sportFilter] + " ‚Äî " + filtered.length + " games";

      if (!filtered.length) {
        const div = document.createElement("div");
        div.style.gridColumn = "1 / -1";
        div.style.fontSize = "0.9rem";
        div.style.color = "var(--text-muted)";
        div.textContent =
          "No games available for this filter. Check back after the next JSON update.";
        cardsGrid.appendChild(div);
        return;
      }

      for (const p of filtered) {
        const card = buildCard(p);
        cardsGrid.appendChild(card);
      }
    }

    function buildCard(p) {
      const conf =
        p.prediction && typeof p.prediction.confidence === "number"
          ? p.prediction.confidence
          : 0;
      const isHighlight = !!p.highlight || conf >= 70;

      const card = document.createElement("article");
      card.className = "pick-card" + (isHighlight ? " pick-card--highlight" : "");

      const sport = (p.sport || "").toUpperCase();
      const combined = combinedById[String(p.id)] || {};
      const dateLocal = combined.date_local || combined.date || "TBD";

      const home = p.home || "";
      const away = p.away || "";
      const matchup = p.matchup || `${away} @ ${home}`;

      const odds = p.odds || {};
      const details = odds.details || "N/A";
      const spread =
        typeof odds.spread === "number" ? odds.spread : "N/A";
      const total =
        typeof odds.total === "number" ? odds.total : "N/A";
      const provider = odds.provider || "ESPN";

      const pred = p.prediction || {};
      const ph = typeof pred.projected_home_score === "number"
        ? pred.projected_home_score.toFixed(1)
        : "‚Äî";
      const pa = typeof pred.projected_away_score === "number"
        ? pred.projected_away_score.toFixed(1)
        : "‚Äî";
      const ptotal =
        typeof pred.projected_total === "number"
          ? pred.projected_total.toFixed(1)
          : "‚Äî";
      const pspread =
        typeof pred.projected_spread === "number"
          ? pred.projected_spread.toFixed(1)
          : "‚Äî";
      const winProb =
        typeof pred.win_probability_home === "number"
          ? (pred.win_probability_home * 100).toFixed(1) + "%"
          : "‚Äî";

      // Edge vs market
      let totalEdgeText = "N/A";
      let spreadEdgeText = "N/A";
      let totalEdgeClass = "";
      let spreadEdgeClass = "";

      if (typeof total === "number" && typeof pred.projected_total === "number") {
        const edge = (pred.projected_total - total).toFixed(1);
        totalEdgeText = (edge > 0 ? "+" : "") + edge;
        if (Math.abs(edge) >= 3) {
          totalEdgeClass =
            "pill-edge-" + (edge > 0 ? "positive" : "negative");
        }
      }

      if (typeof spread === "number" && typeof pred.projected_spread === "number") {
        const edge = (pred.projected_spread - spread).toFixed(1);
        spreadEdgeText = (edge > 0 ? "+" : "") + edge;
        if (Math.abs(edge) >= 2) {
          spreadEdgeClass =
            "pill-edge-" + (edge > 0 ? "positive" : "negative");
        }
      }

      const weather = p.weather || {};
      const risk = p.risk || p.weatherRisk || {};
      const temp = typeof weather.temperatureF === "number"
        ? weather.temperatureF + "¬∞F"
        : "N/A";
      const wind = typeof weather.windSpeedMph === "number"
        ? weather.windSpeedMph + " mph wind"
        : "Calm wind";
      const rain =
        typeof weather.rainChancePct === "number"
          ? weather.rainChancePct + "% rain"
          : "0% rain";
      const shortForecast =
        weather.shortForecast || (weather.indoor ? "Indoor" : "Outdoor");
      const riskLevel =
        risk && risk.risk != null ? String(risk.risk) : "N/A";

      card.innerHTML = `
        <div class="pick-header-row">
          <div class="sport-pill">${sport}</div>
          <div class="date-line">${dateLocal}</div>
        </div>
        <div class="matchup-main">${matchup}</div>
        <div class="matchup-teams">${away} @ ${home}</div>

        <div class="odds-row">
          <div class="pill"><strong>Odds:</strong> ${details} (${provider})</div>
          <div class="pill"><strong>Spread:</strong> ${spread}</div>
          <div class="pill"><strong>Total:</strong> ${total}</div>
        </div>

        <div class="model-row">
          <div class="pill">
            <strong>Model Score:</strong>
            ${away} ${pa} ‚Äì ${home} ${ph}
          </div>
          <div class="pill">
            <strong>Model Spread:</strong> ${pspread}
          </div>
          <div class="pill">
            <strong>Model Total:</strong> ${ptotal}
          </div>
        </div>

        <div class="model-row">
          <div class="pill ${spreadEdgeClass}">
            <strong>Spread Edge:</strong> ${spreadEdgeText}
          </div>
          <div class="pill ${totalEdgeClass}">
            <strong>Total Edge:</strong> ${totalEdgeText}
          </div>
          <div class="pill">
            <strong>Win Prob (Home):</strong> ${winProb}
          </div>
          <div class="pill">
            <strong>Confidence:</strong> ${conf || 0}%
          </div>
        </div>

        <div class="weather-row">
          <div class="pill">
            <strong>Weather:</strong> ${shortForecast}
          </div>
          <div class="pill">
            <strong>Conditions:</strong> ${temp}, ${wind}, ${rain}
          </div>
          <div class="pill">
            <strong>Weather Risk:</strong> ${riskLevel}
          </div>
        </div>

        <div class="footer-line">
          Model output only. Not a guarantee. For entertainment purposes only.
        </div>
      `;

      return card;
    }

    // FILTER CLICK HANDLERS
    filters.forEach((btn) => {
      btn.addEventListener("click", () => {
        filters.forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");
        const sport = btn.dataset.sport;
        renderCards(sport);
      });
    });

    loadData();
  </script>
</body>
</html>
